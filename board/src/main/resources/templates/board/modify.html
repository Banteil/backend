<!DOCTYPE html>
<html lang="kr" layout:decorate="~{layouts/layout}">
  <div layout:fragment="content">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title fw-semibold mb-4">게시글 수정</h5>

        <form
          th:action="@{/board/modify}"
          method="post"
          th:object="${dto}"
          onsubmit="return confirm('정말로 게시글을 수정하시겠습니까?');"
        >
          <input type="hidden" name="bno" th:value="*{bno}" />
          <input type="hidden" name="page" th:value="${requestDTO.page}" />
          <input type="hidden" name="type" th:value="${requestDTO.type}" />
          <input
            type="hidden"
            name="keyword"
            th:value="${requestDTO.keyword}"
          />

          <div class="mb-5 p-4 border rounded bg-light">
            <div class="mb-3">
              <label for="titleInput" class="form-label visually-hidden"
                >제목</label
              >
              <input
                type="text"
                id="titleInput"
                name="title"
                class="form-control form-control-lg"
                style="
                  font-size: 1.5rem;
                  color: #212529;
                  border: 1px solid #ced4da;
                  background-color: #fff;
                "
                th:value="*{title}"
                required
              />
            </div>

            <div
              class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-3 text-muted small"
            >
              <div>
                <span class="me-3">
                  <i class="ti ti-user me-1"></i> 작성자:
                  <span th:text="*{writerName}">홍길동</span>
                </span>
                <span class="me-3">
                  (<span th:text="*{writerEmail}">user@example.com</span>)
                </span>
              </div>
              <div>
                <span class="me-3">
                  <i class="ti ti-calendar me-1"></i> 등록일:
                  <span
                    th:text="${#temporals.format(dto.createDateTime, 'yyyy-MM-dd HH:mm')}"
                    >2023-10-26 10:00</span
                  >
                </span>
                <span>
                  <i class="ti ti-edit me-1"></i> 수정일:
                  <span
                    th:text="${#temporals.format(dto.updateDateTime, 'yyyy-MM-dd HH:mm')}"
                    >2023-10-26 11:00</span
                  >
                </span>
              </div>
            </div>

            <div class="content-body mb-4">
              <label for="contentInput" class="form-label visually-hidden"
                >내용</label
              >
              <textarea
                id="contentInput"
                name="content"
                class="form-control"
                rows="15"
                style="
                  color: #212529;
                  border: 1px solid #ced4da;
                  background-color: #fff;
                "
                required
              >
[[*{content}]]</textarea
              >
            </div>

            <div class="text-end text-muted small">
              <span class="me-3">BNO: <span th:text="*{bno}">1</span></span>
              <span>댓글 수: <span th:text="*{replyCount}">5</span></span>
            </div>
          </div>
          <div class="d-flex justify-content-end mt-4">
            <button type="submit" class="btn btn-primary me-2">
              수정 완료
            </button>

            <a
              th:href="@{/board/read(bno=*{bno}, page=${requestDTO.page}, type=${requestDTO.type}, keyword=${requestDTO.keyword})}"
              class="btn btn-secondary"
              >취소 (상세 페이지로)</a
            >
          </div>
        </form>
      </div>
    </div>
  </div>
  <th:block layout:fragment="script">
    <script th:inline="javascript">
      // 메시지 알림 스크립트 (수정 완료 후 리다이렉트 시 사용)
      const resultMessage = /*[[${msg}]]*/ "default";
      if (resultMessage) {
        Swal.fire({
          title: resultMessage,
          icon: "success",
        });
      }
    </script>
  </th:block>
</html>
