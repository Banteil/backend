<!DOCTYPE html>
<html lang="kr" layout:decorate="~{layouts/layout}">
  <div layout:fragment="content">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title fw-semibold mb-4">새 게시글 등록</h5>

        <form
          th:action="@{/board/register}"
          method="post"
          th:object="${boardDTO}"
          onsubmit="return confirm('새 게시글을 등록하시겠습니까?');"
        >
          <div class="mb-5 p-4 border rounded bg-light">
            <div class="mb-3">
              <label for="titleInput" class="form-label fw-bold">제목</label>
              <input
                type="text"
                id="titleInput"
                name="title"
                class="form-control form-control-lg"
                placeholder="제목을 입력하세요."
                th:field="*{title}"
                style="
                  font-size: 1.5rem;
                  color: #212529;
                  border: 1px solid #ced4da;
                  background-color: #fff;
                "
                required
              />
              <div
                class="text-danger small mt-1"
                th:if="${#fields.hasErrors('title')}"
              >
                <span th:errors="*{title}">제목은 필수 항목입니다.</span>
              </div>
            </div>

            <div class="mb-3">
              <th:block sec:authorize="isAuthenticated()">
                <input
                  type="hidden"
                  id="writerEmailInput"
                  name="writerEmail"
                  th:value="${#authentication.principal.username}"
                />
              </th:block>

              <th:block sec:authorize="isAnonymous()">
                <input
                  type="hidden"
                  id="writerEmailInput"
                  name="writerEmail"
                  th:value="guest"
                />
              </th:block>
            </div>

            <div class="mb-3" sec:authorize="isAnonymous()">
              <label for="passwordInput" class="form-label fw-bold"
                >게시글 비밀번호</label
              >
              <input
                type="password"
                id="passwordInput"
                name="password"
                class="form-control"
                placeholder="비밀번호 4~16자를 입력하세요."
                th:field="*{password}"
                style="
                  color: #212529;
                  border: 1px solid #ced4da;
                  background-color: #fff;
                "
                required
              />
              <div
                class="text-danger small mt-1"
                th:if="${#fields.hasErrors('password')}"
              >
                <span th:errors="*{password}"
                  >비밀번호 형식이 올바르지 않습니다.</span
                >
              </div>
              <div class="form-text text-muted">
                비로그인 작성 시 게시글 수정/삭제를 위해 필요합니다.
              </div>
            </div>

            <div class="mb-3">
              <label for="contentInput" class="form-label fw-bold">내용</label>
              <textarea
                id="contentInput"
                name="content"
                class="form-control"
                rows="15"
                placeholder="내용을 입력하세요."
                th:field="*{content}"
                style="
                  color: #212529;
                  border: 1px solid #ced4da;
                  background-color: #fff;
                "
                required
              ></textarea>
              <div
                class="text-danger small mt-1"
                th:if="${#fields.hasErrors('content')}"
              >
                <span th:errors="*{content}">내용은 필수 항목입니다.</span>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-end mt-4">
            <a th:href="@{/board/list}" class="btn btn-secondary me-2"
              >취소 (목록으로)</a
            >
            <button type="submit" class="btn btn-success">등록 완료</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <th:block layout:fragment="script">
    <script th:inline="javascript">
      // 등록 페이지에서는 별도의 메시지 알림 스크립트는 필요 없습니다.
    </script>
  </th:block>
</html>
