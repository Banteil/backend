<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/main_layout}"
>
  <th:block layout:fragment="title">
    <title>List</title>
  </th:block>
  <div layout:fragment="content">
    <div class="container mt-5">
      <h1>메모 목록</h1>
      <p th:if="${list == null or #lists.isEmpty(list)}">
        등록된 메모가 없습니다.
      </p>

      <table
        th:if="${list != null and not #lists.isEmpty(list)}"
        class="table table-hover table-striped"
      >
        <thead>
          <tr>
            <th scope="col">번호</th>
            <th scope="col">내용</th>
            <th scope="col">작성일</th>
            <th scope="col">수정일</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="memo : ${list}">
            <th scope="row" th:text="${memo.id}">1</th>
            <td>
              <a
                th:href="@{/memo/read(id=${memo.id})}"
                th:text="${#strings.abbreviate(memo.text, 15)}"
                >여기에 메모 내용이 표시됩니다.</a
              >
            </td>
            <td
              th:text="${#temporals.format(memo.createDateTime, 'yyyy-MM-dd HH:mm')}"
            ></td>
            <td
              th:text="${memo.updateDateTime != null} 
                                 ? ${#temporals.format(memo.updateDateTime, 'yyyy-MM-dd HH:mm')} 
                                 : '-'"
            >
              -
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <th:block layout:fragment="script">
    <script th:inline="javascript">
      const resultMessage = /*[[${msg}]]*/ "default";
      if (resultMessage) {
        Swal.fire({
          title: resultMessage,
          icon: "success",
        });
      }
    </script>
  </th:block>
</html>
